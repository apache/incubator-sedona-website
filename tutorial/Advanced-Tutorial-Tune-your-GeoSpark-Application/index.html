



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.7.1">
    
    
      
        <title>Tune GeoSpark RDD application - Apache Sedona</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="pink">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#advanced-tutorial-tune-your-geospark-rdd-application" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Apache Sedona" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Apache Sedona
              </span>
              <span class="md-header-nav__topic">
                Tune GeoSpark RDD application
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/apache/incubator-sedona/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Apache Sedona
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/apache/incubator-sedona/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Download
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Download
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/overview/" title="Quick start" class="md-nav__link">
      Quick start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/GeoSpark-All-Modules-Release-notes/" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/GeoSpark-All-Modules-Maven-Central-Coordinates/" title="Maven Central coordinate" class="md-nav__link">
      Maven Central coordinate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/cluster/" title="Set up Spark cluser" class="md-nav__link">
      Set up Spark cluser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/scalashell/" title="Spark Scala shell" class="md-nav__link">
      Spark Scala shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/project/" title="Self-contained project" class="md-nav__link">
      Self-contained project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/zeppelin/" title="Install GeoSpark-Zeppelin" class="md-nav__link">
      Install GeoSpark-Zeppelin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../download/compile/" title="Compile the source code" class="md-nav__link">
      Compile the source code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rdd/" title="Spatial RDD application" class="md-nav__link">
      Spatial RDD application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sql/" title="Spatial SQL application" class="md-nav__link">
      Spatial SQL application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../viz/" title="Visualize Spatial DataFrame" class="md-nav__link">
      Visualize Spatial DataFrame
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../zeppelin/" title="Run GeoSpark via Zeppelin" class="md-nav__link">
      Run GeoSpark via Zeppelin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../geospark-core-python/" title="Spatial RDD in Python" class="md-nav__link">
      Spatial RDD in Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../geospark-sql-python/" title="Spatial SQL in Python" class="md-nav__link">
      Spatial SQL in Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GeoSpark-Runnable-DEMO/" title="GeoSpark template project" class="md-nav__link">
      GeoSpark template project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Tune GeoSpark RDD application
      </label>
    
    <a href="./" title="Tune GeoSpark RDD application" class="md-nav__link md-nav__link--active">
      Tune GeoSpark RDD application
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pick-a-proper-geospark-version" title="Pick a proper GeoSpark version" class="md-nav__link">
    Pick a proper GeoSpark version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choose-a-proper-spatial-rdd-constructor" title="Choose a proper Spatial RDD constructor" class="md-nav__link">
    Choose a proper Spatial RDD constructor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache-the-spatial-rdd-that-is-repeatedly-used" title="Cache the Spatial RDD that is repeatedly used" class="md-nav__link">
    Cache the Spatial RDD that is repeatedly used
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#be-aware-of-spatial-rdd-partitions" title="Be aware of Spatial RDD partitions" class="md-nav__link">
    Be aware of Spatial RDD partitions
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../benchmark/" title="Benchmark" class="md-nav__link">
      Benchmark
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      GeoSpark core (RDD)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        GeoSpark core (RDD)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/GeoSpark-Scala-and-Java-API/" title="Scala/Java doc" class="md-nav__link">
      Scala/Java doc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/GeoSpark-Python-API/" title="Python doc" class="md-nav__link">
      Python doc
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      GeoSpark SQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        GeoSpark SQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-javadoc/" title="JavaDoc" class="md-nav__link">
      JavaDoc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-Overview/" title="Quick start" class="md-nav__link">
      Quick start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-Constructor/" title="Constructor" class="md-nav__link">
      Constructor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-Function/" title="Function" class="md-nav__link">
      Function
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-Predicate/" title="Predicate" class="md-nav__link">
      Predicate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-AggregateFunction/" title="Aggregate function" class="md-nav__link">
      Aggregate function
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-Optimizer/" title="Join query (optimizer)" class="md-nav__link">
      Join query (optimizer)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/sql/GeoSparkSQL-Parameter/" title="Parameter" class="md-nav__link">
      Parameter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      GeoSpark Viz
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        GeoSpark Viz
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/viz/sql/" title="DataFrame/SQL" class="md-nav__link">
      DataFrame/SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/viz/Babylon-Scala-and-Java-API/" title="RDD" class="md-nav__link">
      RDD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contribute/rule/" title="Contributing rule" class="md-nav__link">
      Contributing rule
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contribute/contributor/" title="Contributors and committers" class="md-nav__link">
      Contributors and committers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contact/" title="Contact" class="md-nav__link">
      Contact
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../publication/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      License
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        License
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../license/License-before-1-2-0/" title="License-before-1.2.0" class="md-nav__link">
      License-before-1.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../license/License/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pick-a-proper-geospark-version" title="Pick a proper GeoSpark version" class="md-nav__link">
    Pick a proper GeoSpark version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choose-a-proper-spatial-rdd-constructor" title="Choose a proper Spatial RDD constructor" class="md-nav__link">
    Choose a proper Spatial RDD constructor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache-the-spatial-rdd-that-is-repeatedly-used" title="Cache the Spatial RDD that is repeatedly used" class="md-nav__link">
    Cache the Spatial RDD that is repeatedly used
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#be-aware-of-spatial-rdd-partitions" title="Be aware of Spatial RDD partitions" class="md-nav__link">
    Be aware of Spatial RDD partitions
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/apache/incubator-sedona/edit/master/docs/tutorial/Advanced-Tutorial-Tune-your-GeoSpark-Application.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="advanced-tutorial-tune-your-geospark-rdd-application">Advanced tutorial: Tune your GeoSpark RDD application<a class="headerlink" href="#advanced-tutorial-tune-your-geospark-rdd-application" title="Permanent link">&para;</a></h1>
<p>Before getting into this advanced tutorial, please make sure that you have tried several GeoSpark functions on your local machine.</p>
<h2 id="pick-a-proper-geospark-version">Pick a proper GeoSpark version<a class="headerlink" href="#pick-a-proper-geospark-version" title="Permanent link">&para;</a></h2>
<p>The versions of GeoSpark have three levels: X.X.X (i.e., 0.8.1). In addition, GeoSpark also supports Spark 1.X in Spark1.X version.</p>
<p>The first level means that this verion contains big structure redesign which may bring big changes in APIs and performance. Hopefully, we can see these big changes in GeoSpark 1.X version.</p>
<p>The second level (i.e., 0.8) indicates that this version contains significant performance enhancement, big new features and API changes. An old GeoSpark user who wants to pick this version needs to be careful about the API changes. Before you move to this version, please read <a href="https://github.com/DataSystemsLab/GeoSpark/wiki/GeoSpark-Full-Version-Release-notes">GeoSpark version release notes</a> and make sure you are ready to accept the API changes.</p>
<p>The third level (i.e., 0.8.1) tells that this version only contains bug fixes, some small new features and slight performance enhancement. This version will not contain any API changes. Moving to this version is safe. We highly suggest all GeoSpark users that stay at the same level move to the latest version in this level.</p>
<h2 id="choose-a-proper-spatial-rdd-constructor">Choose a proper Spatial RDD constructor<a class="headerlink" href="#choose-a-proper-spatial-rdd-constructor" title="Permanent link">&para;</a></h2>
<p>GeoSpark provides a number of constructors for each SpatialRDD (PointRDD, PolygonRDD and LineStringRDD). In general, you have two options to start with.</p>
<ol>
<li>Initialize a SpatialRDD from your data source such as HDFS and S3. A typical example is as follows:
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="nf">PointRDD</span><span class="o">(</span><span class="n">JavaSparkContext</span> <span class="n">sparkContext</span><span class="o">,</span> <span class="n">String</span> <span class="n">InputLocation</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">Offset</span><span class="o">,</span> <span class="n">FileDataSplitter</span> <span class="n">splitter</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">carryInputData</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">partitions</span><span class="o">,</span> <span class="n">StorageLevel</span> <span class="n">newLevel</span><span class="o">)</span>
</pre></div></li>
<li>Initialize a SpatialRDD from an existing RDD. A typical example is as follows:
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="nf">PointRDD</span><span class="o">(</span><span class="n">JavaRDD</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="n">rawSpatialRDD</span><span class="o">,</span> <span class="n">StorageLevel</span> <span class="n">newLevel</span><span class="o">)</span>
</pre></div></li>
</ol>
<p>You may notice that these constructors all take as input a "StorageLevel" parameter. This is to tell Apache Spark cache the "rawSpatialRDD", one attribute of SpatialRDD. The reason why GeoSpark does this is that GeoSpark wants to calculate the dataset boundary and approximate total count using several Apache Spark "Action"s. These information are useful when doing Spatial Join Query and Distance Join Query.</p>
<p>However, in some cases, you may know well about your datasets. If so, you can manually provide these information by calling this kind of Spatial RDD constructors:</p>
<p><div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="nf">PointRDD</span><span class="o">(</span><span class="n">JavaSparkContext</span> <span class="n">sparkContext</span><span class="o">,</span> <span class="n">String</span> <span class="n">InputLocation</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">Offset</span><span class="o">,</span> <span class="n">FileDataSplitter</span> <span class="n">splitter</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">carryInputData</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">partitions</span><span class="o">,</span> <span class="n">Envelope</span> <span class="n">datasetBoundary</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">approximateTotalCount</span><span class="o">)</span> <span class="o">{</span>
</pre></div>
Manually providing the dataset boundary and approxmiate total count helps GeoSpark avoiding several slow "Action"s during initialization.</p>
<h2 id="cache-the-spatial-rdd-that-is-repeatedly-used">Cache the Spatial RDD that is repeatedly used<a class="headerlink" href="#cache-the-spatial-rdd-that-is-repeatedly-used" title="Permanent link">&para;</a></h2>
<p>Each SpatialRDD (PointRDD, PolygonRDD and LineStringRDD) possesses four RDD attributes. They are:</p>
<ol>
<li>rawSpatialRDD: The RDD generated by SpatialRDD constructors.</li>
<li>spatialPartitionedRDD: The RDD generated by spatial partition a rawSpatialRDD. Note that: this RDD has replicated spatial objects.</li>
<li>indexedRawRDD: The RDD generated by indexing a rawSpatialRDD.</li>
<li>indexedRDD: The RDD generated by indexing a spatialPartitionedRDD. Note that: this RDD has replicated spatial objects.</li>
</ol>
<p>These four RDDs don't co-exist so you don't need to worry about the memory issue.
These four RDDs are invoked in different queries:</p>
<ol>
<li>Spatial Range Query / KNN Query, no index: rawSpatialRDD is used.</li>
<li>Spatial Range Query / KNN Query, use index: indexedRawRDD is used.</li>
<li>Spatial Join Query / Distance Join Query, no index: spatialPartitionedRDD is used.</li>
<li>Spatial Join Query / Distance Join Query, use index: indexed RDD is used.</li>
</ol>
<p>Therefore, if you use one of the queries above many times, you'd better cache the associated RDD into memory. There are several possible use cases:</p>
<ol>
<li>In Spatial Data Mining such as Spatial Autocorrelation and Spatial Co-location Pattern Mining, you may need to use Spatial Join / Spatial Self-join iteratively in order to calculate the adjacency matrix. If so, please cache the spatialPartitionedRDD/indexedRDD which is queries many times.</li>
<li>In Spark RDD sharing applications such as <a href="https://github.com/cloudera/livy">Livy</a> and <a href="https://github.com/spark-jobserver/spark-jobserver">Spark Job Server</a>, many users may do Spatial Range Query / KNN Query on the same Spatial RDD with different query predicates. You'd better cache the rawSpatialRDD/indexedRawRDD.</li>
</ol>
<h2 id="be-aware-of-spatial-rdd-partitions">Be aware of Spatial RDD partitions<a class="headerlink" href="#be-aware-of-spatial-rdd-partitions" title="Permanent link">&para;</a></h2>
<p>Sometimes users complain that the execution time is slow in some cases. As the first step, you should always consider increasing the number of your SpatialRDD partitions (2 - 8 times more than the original number). You can do this when you initialize a SpatialRDD. This may significantly improve your performance.</p>
<p>After that, you may consider tuning some other parameters in Apache Spark. For example, you may use Kyro serializer or change the RDD fraction that is cached into memory.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../faq/" title="Frequently Asked Questions" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Frequently Asked Questions
              </span>
            </div>
          </a>
        
        
          <a href="../benchmark/" title="Benchmark" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Benchmark
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/apache/incubator-sedona" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/ApacheSedona" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-64886725-1","www.public.asu.edu/~jiayu2/geospark/index.html"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>